# DADI Identity

## The anonymous record

### Overview

DADI Identity stores a series of markers along with a generated UUID in order to facilitate session persistence and to provide a gurentee of UUID uniqueness.

The issuing of a UUID is not dependant on the stored markers. UUIDs are issued in response to a request to the platform and are generated independantly in the platform.

DADI Identity issues-forwards, meaning that new requests for UUIDs are _always_ answered with a new UUID.

Stored markers are used as a method of chaining issued UUIDs based on confidence scoring. Previous matches are linked as a child along with a confidence metric. This approach allows for the interrogation of a deeper data set in those cases where a UUID is not persisted over term, although our confidence in this data will be lower.

### Record structure

| Name | Value | Description |
|------|-------|-------------|
| uuid | String | An RFC 4122 V4 UUID. The unique and gaurenteed identifier for the anonymous user |
| device | String | The generated fingerprint for the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/deviceFingerprint.md) |
| location | String | The generated fingerprint for the location of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/locationFingerprint.md) |
| network | String | The generated fingerprint for the network of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/networkFingerprint.md) |
| providor | String | The generated fingerprint for the network providor of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/providorFingerprint.md) |
| language | String | The generated fingerprint for the language of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/languageFingerprint.md) |
| agent | String | The generated fingerprint for the agent of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/agentFingerprint.md) |
| protocol | String | The generated fingerprint for the internet protocoal (IP) of the requesting device [More information](https://github.com/dadi/identity/blob/docs/docs/protocolFingerprint.md) |
| created | String | The ISO formatted date that the record was created |
| lastSeen | String | The ISO formatted date that the record was last seen by the system |
| matched | Object | Matched UUIDs, trailing based on the issue-forward approach of the system |
| confidence | Number | The confidence score applied to the match. Confidence scores are generated by the system based on a self-assessment routine run periodically. [More information](https://github.com/dadi/identity/blob/docs/docs/confidenceScoring.md) |

### Example records

An example record:

	{
	    "uuid" : "2c230e62-e19d-49ea-93ab-5841e22ab5d7",
	    "device" : "e7a76c81f52a51a764691512bc91a3da",
	    "location" : "1540753655",
	    "network" : "-438796388",
	    "providor" : "-1312487441",
	    "language" : "-860819097",
	    "agent" : "969972343",
	    "protocol" : "-1507675173",
	    "created" : "2016-02-10T14:45:05.854+0000",
	    "lastSeen" : "2016-02-10T15:25:18.854+0000"
	}

An example record with children:

	{
	    "uuid" : "2c230e62-e19d-49ea-93ab-5841e22ab5d7",
	    "device" : "e7a76c81f52a51a764691512bc91a3da",
	    "location" : "1540753655",
	    "network" : "-438796388",
	    "providor" : "-1312487441",
	    "language" : "-860819097",
	    "agent" : "969972343",
	    "protocol" : "-1507675173",
	    "created" : "2016-02-10T14:45:05.854+0000",
	    "lastSeen" : "2016-02-10T15:25:18.854+0000",
	    "matched" : [
		   {
		     "uuid" : "2fced4c8-a552-471f-8a31-258d3f316818",
		     "confidence" : "95.72"
		   },
		   {
		     "uuid" : "502338f2-cfca-4c96-bd50-f1c5ba82461b",
		     "confidence" : "96.48"
		   },
		   {
		     "uuid" : "2cab1818-a22a-4943-afaa-75e9ce96eccd",
		     "confidence" : "87.44"
		   },
		   {
		     "uuid" : "b660abb7-ac4a-4717-a96d-86c611710ec7",
		     "confidence" : "97.55"
		   }
	    ]
	}
